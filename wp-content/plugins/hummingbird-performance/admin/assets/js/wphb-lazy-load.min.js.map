{"version":3,"file":"js/wphb-lazy-load.min.js","mappings":"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","sources":["webpack://wp-hummingbird/./_src/js/lazy-load.js"],"sourcesContent":["/* global wphbGlobal */\n/* global ajaxurl */\n\n( function() {\n\t'use strict';\n\n\tconst WPHBLazyComment = {\n\t\tcommentsFormLoading: false,\n\t\tcommentsLoading: false,\n\t\tcommentsLoadComplete: false,\n\t\tcommentsLoaded: 0,\n\t\tloadOnScroll: false,\n\t\tloadCommentFormOnScroll: false,\n\t\tcommentLoadingMethod: 'click', //or scroll\n\t\tpageCommentsOption: 0,\n\t\ttotalCommentsPages: 1,\n\t\tcommentsPageOrder: 'newest', //or oldest\n\t\tcpageNum: 1,\n\t\tpostId: 0,\n\t\tcommentNonce: '',\n\t\tcommentsContainer: null,\n\t\tcommentList: null,\n\t\tloadCommentsButton: null,\n\t\tloadCommentsButtonWrap: null,\n\t\tcommentsEndIndicator: null,\n\t\tcommentsLoadSpinnerWrap: null,\n\t\tajaxurl: null,\n\t\tpreloadComment: false,\n\n\t\tinit() {\n\t\t\tif ( wphbGlobal ) {\n\t\t\t\tthis.ajaxurl = wphbGlobal.ajaxurl;\n\t\t\t} else {\n\t\t\t\tthis.ajaxurl = ajaxurl;\n\t\t\t}\n\n\t\t\t// Run comment lazy loader if we are in site front-end and in a single page.\n\t\t\tif ( document.getElementById( 'wphb-comments-wrap' ) ) {\n\t\t\t\tthis.initCommentLazyLoader();\n\t\t\t}\n\t\t},\n\n\t\tinitCommentLazyLoader() {\n\t\t\tthis.commentLoadingMethod = document.getElementById(\n\t\t\t\t'wphb-load-comments-method'\n\t\t\t).value;\n\n\t\t\tthis.pageCommentsOption = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-page-comments-option' ).value\n\t\t\t);\n\n\t\t\tthis.totalCommentsPages = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-total-comments-pages' ).value\n\t\t\t);\n\n\t\t\tthis.commentsPageOrder = document.getElementById(\n\t\t\t\t'wphb-comments-page-order'\n\t\t\t).value;\n\n\t\t\tthis.cpageNum = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-cpage-num' ).value\n\t\t\t);\n\n\t\t\tthis.preloadComment = Boolean( wphbGlobal.preloadComment );\n\n\t\t\tif ( true === this.preloadComment ) {\n\t\t\t\tthis.cpageNum = this.commentsPageOrder === 'newest' ? this.cpageNum - 1 : this.cpageNum + 1;\n\t\t\t}\n\t\t\tthis.postId = parseInt(\n\t\t\t\tdocument.getElementById( 'wphb-post-id' ).value\n\t\t\t);\n\n\t\t\tthis.commentNonce = document.getElementById(\n\t\t\t\t'comment-template-nonce'\n\t\t\t).value;\n\n\t\t\tthis.commentsContainer = document.getElementById(\n\t\t\t\t'wphb-comments-container'\n\t\t\t);\n\n\t\t\tthis.commentsEndIndicator = document.getElementById(\n\t\t\t\t'wphb-comments-end-indicator'\n\t\t\t);\n\n\t\t\tthis.commentsLoadSpinnerWrap = document.getElementById(\n\t\t\t\t'wphb-load-comments-spinner-wrap'\n\t\t\t);\n\n\t\t\tif ( this.commentLoadingMethod === 'click' ) {\n\t\t\t\tthis.loadCommentsButton = document.getElementById(\n\t\t\t\t\t'wphb-load-comments'\n\t\t\t\t);\n\t\t\t\tthis.loadCommentsButtonWrap = document.getElementById(\n\t\t\t\t\t'wphb-load-comments-button-wrap'\n\t\t\t\t);\n\t\t\t}\n\t\t\tif ( true === this.preloadComment ) {\n\t\t\t\tif ( this.cpageNum < 1 || this.cpageNum > WPHBLazyComment.totalCommentsPages ) {\n\t\t\t\t\tWPHBLazyComment.finishCommentLoad();\n\t\t\t\t} else {\n\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t}\n\n\t\t\t\tWPHBLazyComment.putCommentContent( wphbGlobal.commentForm, false );\n\t\t\t}\n\t\t\t\n\t\t\t// If we've the load on click enabled\n\t\t\tif ( this.commentLoadingMethod === 'click' ) {\n\t\t\t\tthis.loadCommentsButton.addEventListener( 'click', () =>\n\t\t\t\t\tWPHBLazyComment.loadComments()\n\t\t\t\t);\n\t\t\t\tif ( true !== this.preloadComment ) {\n\t\t\t\t\t// At the very beginning load the comment form and basic wrappers\n\t\t\t\t\tthis.loadCommentFormOnScroll = true;\n\t\t\t\t\twindow.addEventListener( 'scroll', WPHBLazyComment.handleScrollingForLoadForm );\n\t\t\t\t\t// For some small posts comment area might be in view port on page load.\n\t\t\t\t\t// So try to run loadComments on page load.\n\t\t\t\t\tWPHBLazyComment.handleScrollingForLoadForm();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//If we've the load on scroll enabled\n\t\t\tif ( this.commentLoadingMethod === 'scroll' ) {\n\t\t\t\tthis.loadOnScroll = true;\n\t\t\t\twindow.addEventListener( 'scroll', () =>\n\t\t\t\t\tWPHBLazyComment.handleScrolling()\n\t\t\t\t);\n\t\t\t\t// For some small posts comment area might be in view port on page load.\n\t\t\t\t// So try to run loadCommentsForm on page load.\n\t\t\t\tWPHBLazyComment.handleScrolling();\n\t\t\t}\n\t\t},\n\n\t\tenableCommentLoad() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.removeAttribute( 'disabled' );\n\t\t\t}\n\n\t\t\tthis.loadOnScroll = true;\n\t\t},\n\n\t\tdisableCommentLoad() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.setAttribute( 'disabled', 'disabled' );\n\t\t\t}\n\n\t\t\tthis.loadOnScroll = false;\n\t\t\tthis.loadCommentFormOnScroll = false;\n\t\t},\n\n\t\tmoveLoadButton() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.insertAfter(\n\t\t\t\t\tthis.loadCommentsButtonWrap,\n\t\t\t\t\tthis.commentList\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\tmoveCommentsEndIndicator() {\n\t\t\tthis.insertAfter( this.commentsEndIndicator, this.commentList );\n\t\t},\n\n\t\tmoveCommentForm() {\n\t\t\tconst form = document.getElementById( 'respond' );\n\t\t\tif ( form ) {\n\t\t\t\tthis.insertBefore( form, this.commentList );\n\t\t\t}\n\t\t},\n\n\t\thideLoadButton() {\n\t\t\tif ( this.loadCommentsButton ) {\n\t\t\t\tthis.loadCommentsButton.style.display = 'none';\n\t\t\t}\n\t\t},\n\n\t\tshowCommentLoadSpinner() {\n\t\t\tthis.commentsLoadSpinnerWrap.style.display = 'block';\n\t\t},\n\n\t\thideCommentLoadSpinner() {\n\t\t\tthis.commentsLoadSpinnerWrap.style.display = 'none';\n\t\t},\n\n\t\tmoveCommentLoadSpinner() {\n\t\t\tthis.insertAfter( this.commentsLoadSpinnerWrap, this.commentList );\n\t\t},\n\n\t\tfinishCommentLoad() {\n\t\t\tthis.commentsLoading = false;\n\t\t\tthis.disableCommentLoad();\n\t\t\tthis.hideLoadButton();\n\t\t},\n\n\t\thandleScrolling() {\n\t\t\t// Check if in viewport and loadOnScroll is enabled\n\t\t\tif (\n\t\t\t\t! this.loadOnScroll ||\n\t\t\t\t! this.isInViewport( this.commentsEndIndicator )\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis.loadComments();\n\t\t},\n\n\t\thandleScrollingForLoadForm() {\n\t\t\t// Check if in viewport and loadCommentFormOnScroll is enabled\n\t\t\tif (\n\t\t\t\t! WPHBLazyComment.loadCommentFormOnScroll ||\n\t\t\t\t! WPHBLazyComment.isInViewport( WPHBLazyComment.commentsEndIndicator )\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\twindow.removeEventListener( 'scroll', WPHBLazyComment.handleScrollingForLoadForm );\n\n\t\t\tWPHBLazyComment.loadCommentsForm();\n\t\t},\n\n\t\tloadCommentsForm() {\n\t\t\tthis.commentsFormLoading = true;\n\t\t\tthis.loadComments();\n\t\t},\n\n\t\tloadComments() {\n\t\t\tif ( this.commentsLoadComplete || this.commentsLoading ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.getCommentsTemplate();\n\t\t},\n\n\t\tgetCommentsTemplate() {\n\t\t\tthis.disableCommentLoad();\n\t\t\tthis.showCommentLoadSpinner();\n\t\t\tconst cxhr = new XMLHttpRequest();\n\n\t\t\tthis.commentsLoading = true;\n\t\t\tcxhr.open(\n\t\t\t\t'GET',\n\t\t\t\tWPHBLazyComment.ajaxurl +\n\t\t\t\t\t'?action=get_comments_template&id=' +\n\t\t\t\t\tWPHBLazyComment.postId +\n\t\t\t\t\t'&cpage_num=' +\n\t\t\t\t\tWPHBLazyComment.cpageNum +\n\t\t\t\t\t'&_nonce=' +\n\t\t\t\t\tWPHBLazyComment.commentNonce\n\t\t\t);\n\n\t\t\tcxhr.onload = function() {\n\t\t\t\t// Append the comment template\n\t\t\t\tif ( 200 === cxhr.status ) {\n\t\t\t\t\tconst response = JSON.parse( cxhr.responseText );\n\t\t\t\t\tif ( 'undefined' !== typeof response.data ) {\n\t\t\t\t\t\t// Append the comment template/ Error message returned in Ajax response\n\t\t\t\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tWPHBLazyComment.commentsLoaded++;\n\t\t\t\t\t\t\tWPHBLazyComment.cpageNum =\n\t\t\t\t\t\t\tWPHBLazyComment.commentsPageOrder === 'newest'\n\t\t\t\t\t\t\t\t? WPHBLazyComment.cpageNum - 1\n\t\t\t\t\t\t\t\t: WPHBLazyComment.cpageNum + 1;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tWPHBLazyComment.cpageNum < 1 ||\n\t\t\t\t\t\t\t\tWPHBLazyComment.cpageNum >\n\t\t\t\t\t\t\t\t\tWPHBLazyComment.totalCommentsPages\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tWPHBLazyComment.finishCommentLoad();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tWPHBLazyComment.putCommentContent(\n\t\t\t\t\t\t\tresponse.data.content\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\t\t\t\tWPHBLazyComment.commentsFormLoading = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show the error, if failed; Enable the button, scroll loading\n\t\t\t\t\tWPHBLazyComment.enableCommentLoad();\n\t\t\t\t}\n\t\t\t\tWPHBLazyComment.commentsLoading = false;\n\t\t\t\tWPHBLazyComment.hideCommentLoadSpinner();\n\t\t\t};\n\n\t\t\tcxhr.send();\n\t\t},\n\n\t\tputCommentContent( content, preload = true ) {\n\t\t\tconst html = this.stringToHTML( content );\n\t\t\tlet comment = html.querySelector( '.comment' );\n\n\t\t\tif ( null === comment ) {\n\t\t\t\tcomment = html.querySelector( '.review' );\n\t\t\t}\n\n\t\t\tif ( ! comment ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst commentList = comment.parentNode;\n\n\t\t\tif ( WPHBLazyComment.commentsFormLoading === true ) {\n\t\t\t\tcommentList.innerHTML = '';\n\t\t\t}\n\n\t\t\tif ( true === preload && ( this.commentsLoaded > 1 || ( this.commentLoadingMethod === 'click' && WPHBLazyComment.commentsFormLoading === false ) ) ) {\n\t\t\t\tthis.commentList.innerHTML += commentList.innerHTML;\n\t\t\t} else {\n\t\t\t\tthis.commentsContainer.appendChild( html );\n\t\t\t\tthis.commentList = commentList;\n\t\t\t\tthis.moveCommentsEndIndicator();\n\t\t\t\tthis.moveCommentLoadSpinner();\n\t\t\t\tthis.moveLoadButton();\n\t\t\t\tif ( this.commentLoadingMethod === 'scroll' ) {\n\t\t\t\t\tthis.moveCommentForm();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( true !== preload ) {\n\t\t\t\tWPHBLazyComment.commentsLoaded++;\n\t\t\t}\n\t\t},\n\n\t\tstringToHTML( str ) {\n\t\t\tstr = '<div>' + str + '</div>';\n\t\t\tconst support = ( function() {\n\t\t\t\tif ( ! window.DOMParser ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\ttry {\n\t\t\t\t\tparser.parseFromString( 'x', 'text/html' );\n\t\t\t\t} catch ( err ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t} )();\n\n\t\t\t//If DOMParser is supported, use it\n\t\t\tif ( support ) {\n\t\t\t\tconst parser = new DOMParser();\n\t\t\t\tconst doc = parser.parseFromString( str, 'text/html' );\n\t\t\t\treturn doc.body.firstChild;\n\t\t\t}\n\n\t\t\t// Otherwise, fallback to old-school method\n\t\t\tconst dom = document.createElement( 'div' );\n\t\t\tdom.innerHTML = str;\n\t\t\treturn dom.firstChild;\n\t\t},\n\n\t\tinsertAfter( newNode, referenceNode ) {\n\t\t\treferenceNode.parentNode.insertBefore(\n\t\t\t\tnewNode,\n\t\t\t\treferenceNode.nextSibling\n\t\t\t);\n\t\t},\n\n\t\tinsertBefore( newNode, referenceNode ) {\n\t\t\treferenceNode.parentNode.insertBefore( newNode, referenceNode );\n\t\t},\n\n\t\tisInViewport( element ) {\n\t\t\tconst bounding = element.getBoundingClientRect();\n\t\t\treturn (\n\t\t\t\tbounding.top >= 0 &&\n\t\t\t\tbounding.left >= 0 &&\n\t\t\t\tbounding.bottom <=\n\t\t\t\t\t( window.innerHeight ||\n\t\t\t\t\t\tdocument.documentElement.clientHeight ) &&\n\t\t\t\tbounding.right <=\n\t\t\t\t\t( window.innerWidth ||\n\t\t\t\t\t\tdocument.documentElement.clientWidth )\n\t\t\t);\n\t\t},\n\t};\n\n\tif ( wphbGlobal.preloadComment ) {\n\t\tWPHBLazyComment.init();\n\t} else {\n\t\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\t\tWPHBLazyComment.init();\n\t\t} );\n\t}\n}() );\n"],"names":["WPHBLazyComment","commentsFormLoading","commentsLoading","commentsLoadComplete","commentsLoaded","loadOnScroll","loadCommentFormOnScroll","commentLoadingMethod","pageCommentsOption","totalCommentsPages","commentsPageOrder","cpageNum","postId","commentNonce","commentsContainer","commentList","loadCommentsButton","loadCommentsButtonWrap","commentsEndIndicator","commentsLoadSpinnerWrap","ajaxurl","preloadComment","init","wphbGlobal","this","document","getElementById","initCommentLazyLoader","value","parseInt","Boolean","finishCommentLoad","enableCommentLoad","putCommentContent","commentForm","addEventListener","loadComments","window","handleScrollingForLoadForm","handleScrolling","removeAttribute","disableCommentLoad","setAttribute","moveLoadButton","insertAfter","moveCommentsEndIndicator","moveCommentForm","form","insertBefore","hideLoadButton","style","display","showCommentLoadSpinner","hideCommentLoadSpinner","moveCommentLoadSpinner","isInViewport","removeEventListener","loadCommentsForm","getCommentsTemplate","cxhr","XMLHttpRequest","open","onload","status","response","JSON","parse","responseText","data","content","send","preload","arguments","length","undefined","html","stringToHTML","comment","querySelector","parentNode","innerHTML","appendChild","str","support","DOMParser","parser","parseFromString","err","body","firstChild","dom","createElement","newNode","referenceNode","nextSibling","element","bounding","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth"],"sourceRoot":""}